using System.Threading.Tasks;
using foosballv2s.Droid.Shared.Source.Entities;
using foosballv2s.Droid.Shared.Source.Services.CredentialStorage;
using foosballv2s.Droid.Shared.Source.Services.FoosballWebService.Helpers;
using foosballv2s.Droid.Shared.Source.Services.FoosballWebService.Repository;
using Newtonsoft.Json;
using Xamarin.Forms;

[assembly: Dependency(typeof(TournamentRepository))]
namespace foosballv2s.Droid.Shared.Source.Services.FoosballWebService.Repository
{
    /// <summary>
    /// A class for forming and fetching the requests to the web service about tournament
    /// </summary>
    public class TournamentRepository
    {
        private readonly string endpointUrl = "/tournament";
        private IWebServiceClient client;
        private ICredentialStorage storage;

        public TournamentRepository()
        {
            client = DependencyService.Get<IWebServiceClient>();
            storage = DependencyService.Get<ICredentialStorage>();
        }

        /// <summary>
        /// Fetches all tournaments
        /// </summary>
        /// <returns></returns>
        public async Task<Tournament[]> GetAll(string urlParams = null)
        {
            var response = await client.GetAsync(endpointUrl + "/");
            //var response = "[    {        \"id\": 1,        \"currentStage\": 1,        \"startTime\": \"0001-01-01T00:00:00\",        \"endTime\": \"0001-01-01T00:00:00\",        \"numberOfTeamsRequired\": 0,        \"numberOfStages\": 2,        \"isEnoughTeams\": true,        \"teams\": [],        \"pairs\": []    },    {        \"id\": 2,        \"currentStage\": 1,        \"startTime\": \"0001-01-01T00:00:00\",        \"endTime\": \"0001-01-01T00:00:00\",        \"numberOfTeamsRequired\": 0,        \"numberOfStages\": 3,        \"isEnoughTeams\": true,        \"teams\": [],        \"pairs\": []    },    {        \"id\": 4,        \"currentStage\": 2,        \"startTime\": \"0001-01-01T00:00:00\",        \"endTime\": \"0001-01-01T00:00:00\",        \"numberOfTeamsRequired\": 0,        \"numberOfStages\": 3,        \"isEnoughTeams\": true,        \"teams\": [],        \"pairs\": [            {                \"id\": 1,                \"gamePairNumberInStage\": 2,                \"stageNumber\": 3,                \"team1\": null,                \"team1Id\": null,                \"team2\": null,                \"team2Id\": null,                \"game\": null,                \"gameId\": null            },            {                \"id\": 2,                \"gamePairNumberInStage\": 2,                \"stageNumber\": 3,                \"team1\": null,                \"team1Id\": null,                \"team2\": null,                \"team2Id\": null,                \"game\": null,                \"gameId\": null            },            {                \"id\": 3,                \"gamePairNumberInStage\": 3,                \"stageNumber\": 3,                \"team1\": null,                \"team1Id\": null,                \"team2\": null,                \"team2Id\": null,                \"game\": null,                \"gameId\": null            },            {                \"id\": 4,                \"gamePairNumberInStage\": 3,                \"stageNumber\": 3,                \"team1\": null,                \"team1Id\": null,                \"team2\": null,                \"team2Id\": null,                \"game\": null,                \"gameId\": null            },            {                \"id\": 5,                \"gamePairNumberInStage\": 3,                \"stageNumber\": 3,                \"team1\": null,                \"team1Id\": null,                \"team2\": null,                \"team2Id\": null,                \"game\": null,                \"gameId\": null            },            {                \"id\": 6,                \"gamePairNumberInStage\": 3,                \"stageNumber\": 3,                \"team1\": null,                \"team1Id\": null,                \"team2\": null,                \"team2Id\": null,                \"game\": null,                \"gameId\": null            },            {                \"id\": 7,                \"gamePairNumberInStage\": 3,                \"stageNumber\": 3,                \"team1\": null,                \"team1Id\": null,                \"team2\": null,                \"team2Id\": null,                \"game\": null,                \"gameId\": null            },            {                \"id\": 8,                \"gamePairNumberInStage\": 3,                \"stageNumber\": 3,                \"team1\": null,                \"team1Id\": null,                \"team2\": null,                \"team2Id\": null,                \"game\": null,                \"gameId\": null            },            {                \"id\": 27,                \"gamePairNumberInStage\": 0,                \"stageNumber\": 1,                \"team1\": {                    \"id\": 158,                    \"teamName\": \"hzhzhz\",                    \"user\": null                },                \"team1Id\": 158,                \"team2\": {                    \"id\": 159,                    \"teamName\": \"hshsjsjj\",                    \"user\": null                },                \"team2Id\": 159,                \"game\": {                    \"id\": 10,                    \"team1\": null,                    \"team2\": null,                    \"team1Score\": 7,                    \"team2Score\": 0,                    \"startTime\": \"2017-11-14T21:02:48.317942\",                    \"endTime\": \"2017-11-14T21:03:08.893432\",                    \"gameEvents\": null,                    \"user\": null                },                \"gameId\": 10            }        ]    },    {        \"id\": 5,        \"currentStage\": 1,        \"startTime\": \"2017-12-17T15:13:30.0174061\",        \"endTime\": \"0001-01-01T00:00:00\",        \"numberOfTeamsRequired\": 0,        \"numberOfStages\": 3,        \"isEnoughTeams\": true,        \"teams\": [],        \"pairs\": []    },    {        \"id\": 6,        \"currentStage\": 1,        \"startTime\": \"2017-12-17T15:59:31.0273268\",        \"endTime\": \"0001-01-01T00:00:00\",        \"numberOfTeamsRequired\": 0,        \"numberOfStages\": 3,        \"isEnoughTeams\": true,        \"teams\": [],        \"pairs\": []    },    {        \"id\": 7,        \"currentStage\": 1,        \"startTime\": \"2017-12-17T15:59:44.8871196\",        \"endTime\": \"0001-01-01T00:00:00\",        \"numberOfTeamsRequired\": 0,        \"numberOfStages\": 4,        \"isEnoughTeams\": true,        \"teams\": [],        \"pairs\": []    },    {        \"id\": 8,        \"currentStage\": 1,        \"startTime\": \"2017-12-17T15:59:51.4354941\",        \"endTime\": \"0001-01-01T00:00:00\",        \"numberOfTeamsRequired\": 0,        \"numberOfStages\": 5,        \"isEnoughTeams\": true,        \"teams\": [],        \"pairs\": []    },    {        \"id\": 9,        \"currentStage\": 1,        \"startTime\": \"2017-12-17T15:59:57.9488667\",        \"endTime\": \"0001-01-01T00:00:00\",        \"numberOfTeamsRequired\": 0,        \"numberOfStages\": 5,        \"isEnoughTeams\": true,        \"teams\": [],        \"pairs\": []    },    {        \"id\": 10,        \"currentStage\": 1,        \"startTime\": \"2017-12-17T16:08:52.6844518\",        \"endTime\": \"0001-01-01T00:00:00\",        \"numberOfTeamsRequired\": 0,        \"numberOfStages\": 5,        \"isEnoughTeams\": true,        \"teams\": [],        \"pairs\": []    },    {        \"id\": 11,        \"currentStage\": 1,        \"startTime\": \"2017-12-17T16:10:19.6034233\",        \"endTime\": \"0001-01-01T00:00:00\",        \"numberOfTeamsRequired\": 0,        \"numberOfStages\": 5,        \"isEnoughTeams\": true,        \"teams\": [],        \"pairs\": []    },    {        \"id\": 12,        \"currentStage\": 1,        \"startTime\": \"2017-12-17T16:35:55.7822877\",        \"endTime\": \"0001-01-01T00:00:00\",        \"numberOfTeamsRequired\": 0,        \"numberOfStages\": 5,        \"isEnoughTeams\": true,        \"teams\": [],        \"pairs\": []    },    {        \"id\": 13,        \"currentStage\": 1,        \"startTime\": \"2017-12-17T16:36:47.7512601\",        \"endTime\": \"0001-01-01T00:00:00\",        \"numberOfTeamsRequired\": 0,        \"numberOfStages\": 5,        \"isEnoughTeams\": true,        \"teams\": [],        \"pairs\": []    },    {        \"id\": 14,        \"currentStage\": 1,        \"startTime\": \"2017-12-17T16:37:05.3702679\",        \"endTime\": \"0001-01-01T00:00:00\",        \"numberOfTeamsRequired\": 0,        \"numberOfStages\": 6,        \"isEnoughTeams\": true,        \"teams\": [],        \"pairs\": []    },    {        \"id\": 15,        \"currentStage\": 1,        \"startTime\": \"2017-12-17T17:20:58.1498543\",        \"endTime\": \"0001-01-01T00:00:00\",        \"numberOfTeamsRequired\": 0,        \"numberOfStages\": 2,        \"isEnoughTeams\": true,        \"teams\": [],        \"pairs\": []    },    {        \"id\": 16,        \"currentStage\": 1,        \"startTime\": \"2017-12-17T20:41:03.9333675\",        \"endTime\": \"0001-01-01T00:00:00\",        \"numberOfTeamsRequired\": 0,        \"numberOfStages\": 7,        \"isEnoughTeams\": true,        \"teams\": [],        \"pairs\": []    },    {        \"id\": 17,        \"currentStage\": 1,        \"startTime\": \"2017-12-17T20:44:36.8032687\",        \"endTime\": \"0001-01-01T00:00:00\",        \"numberOfTeamsRequired\": 0,        \"numberOfStages\": 7,        \"isEnoughTeams\": true,        \"teams\": [],        \"pairs\": [            {                \"id\": 9,                \"gamePairNumberInStage\": 0,                \"stageNumber\": 1,                \"team1\": null,                \"team1Id\": null,                \"team2\": null,                \"team2Id\": null,                \"game\": null,                \"gameId\": null            }        ]    },    {        \"id\": 18,        \"currentStage\": 1,        \"startTime\": \"2017-12-17T20:45:27.3652798\",        \"endTime\": \"0001-01-01T00:00:00\",        \"numberOfTeamsRequired\": 0,        \"numberOfStages\": 7,        \"isEnoughTeams\": true,        \"teams\": [],        \"pairs\": [            {                \"id\": 10,                \"gamePairNumberInStage\": 0,                \"stageNumber\": 1,                \"team1\": null,                \"team1Id\": null,                \"team2\": null,                \"team2Id\": null,                \"game\": null,                \"gameId\": null            }        ]    },    {        \"id\": 20,        \"currentStage\": 1,        \"startTime\": \"2017-12-17T21:03:37.63964\",        \"endTime\": \"0001-01-01T00:00:00\",        \"numberOfTeamsRequired\": 0,        \"numberOfStages\": 7,        \"isEnoughTeams\": true,        \"teams\": [],        \"pairs\": [            {                \"id\": 11,                \"gamePairNumberInStage\": 0,                \"stageNumber\": 1,                \"team1\": null,                \"team1Id\": null,                \"team2\": null,                \"team2Id\": null,                \"game\": null,                \"gameId\": null            }        ]    },    {        \"id\": 21,        \"currentStage\": 1,        \"startTime\": \"2017-12-17T21:04:20.8511115\",        \"endTime\": \"0001-01-01T00:00:00\",        \"numberOfTeamsRequired\": 0,        \"numberOfStages\": 7,        \"isEnoughTeams\": true,        \"teams\": [],        \"pairs\": [            {                \"id\": 12,                \"gamePairNumberInStage\": 0,                \"stageNumber\": 1,                \"team1\": null,                \"team1Id\": null,                \"team2\": null,                \"team2Id\": null,                \"game\": null,                \"gameId\": null            },            {                \"id\": 13,                \"gamePairNumberInStage\": 0,                \"stageNumber\": 1,                \"team1\": null,                \"team1Id\": null,                \"team2\": null,                \"team2Id\": null,                \"game\": null,                \"gameId\": null            }        ]    },    {        \"id\": 22,        \"currentStage\": 1,        \"startTime\": \"2017-12-17T22:01:39.0857673\",        \"endTime\": \"0001-01-01T00:00:00\",        \"numberOfTeamsRequired\": 0,        \"numberOfStages\": 5,        \"isEnoughTeams\": true,        \"teams\": [],        \"pairs\": [            {                \"id\": 14,                \"gamePairNumberInStage\": 0,                \"stageNumber\": 1,                \"team1\": null,                \"team1Id\": null,                \"team2\": null,                \"team2Id\": null,                \"game\": null,                \"gameId\": null            }        ]    },    {        \"id\": 26,        \"currentStage\": 1,        \"startTime\": \"2017-12-17T23:32:08.350186\",        \"endTime\": \"0001-01-01T00:00:00\",        \"numberOfTeamsRequired\": 0,        \"numberOfStages\": 5,        \"isEnoughTeams\": true,        \"teams\": [],        \"pairs\": []    },    {        \"id\": 28,        \"currentStage\": 1,        \"startTime\": \"2017-12-17T23:38:09.3904262\",        \"endTime\": \"0001-01-01T00:00:00\",        \"numberOfTeamsRequired\": 0,        \"numberOfStages\": 5,        \"isEnoughTeams\": true,        \"teams\": [],        \"pairs\": [            {                \"id\": 15,                \"gamePairNumberInStage\": 0,                \"stageNumber\": 1,                \"team1\": {                    \"id\": 110,                    \"teamName\": \"bumbim2\",                    \"user\": null                },                \"team1Id\": 110,                \"team2\": {                    \"id\": 114,                    \"teamName\": \"bumbim4\",                    \"user\": null                },                \"team2Id\": 114,                \"game\": null,                \"gameId\": null            }        ]    },    {        \"id\": 30,        \"currentStage\": 1,        \"startTime\": \"2017-12-17T23:56:47.6823888\",        \"endTime\": \"0001-01-01T00:00:00\",        \"numberOfTeamsRequired\": 0,        \"numberOfStages\": 4,        \"isEnoughTeams\": true,        \"teams\": [],        \"pairs\": [            {                \"id\": 17,                \"gamePairNumberInStage\": 0,                \"stageNumber\": 1,                \"team1\": {                    \"id\": 116,                    \"teamName\": \"bimbam5\",                    \"user\": null                },                \"team1Id\": 116,                \"team2\": {                    \"id\": 110,                    \"teamName\": \"bumbim2\",                    \"user\": null                },                \"team2Id\": 110,                \"game\": null,                \"gameId\": null            }        ]    },    {        \"id\": 33,        \"currentStage\": 1,        \"startTime\": \"2017-12-18T12:12:41.0247232\",        \"endTime\": \"0001-01-01T00:00:00\",        \"numberOfTeamsRequired\": 0,        \"numberOfStages\": 4,        \"isEnoughTeams\": true,        \"teams\": [],        \"pairs\": [            {                \"id\": 20,                \"gamePairNumberInStage\": 0,                \"stageNumber\": 1,                \"team1\": {                    \"id\": 116,                    \"teamName\": \"bimbam5\",                    \"user\": null                },                \"team1Id\": 116,                \"team2\": {                    \"id\": 115,                    \"teamName\": \"bumbim5\",                    \"user\": null                },                \"team2Id\": 115,                \"game\": {                    \"id\": 9,                    \"team1\": null,                    \"team2\": null,                    \"team1Score\": 7,                    \"team2Score\": 0,                    \"startTime\": \"2017-11-14T21:52:54.547861\",                    \"endTime\": \"2017-11-14T21:53:23.384727\",                    \"gameEvents\": null,                    \"user\": null                },                \"gameId\": 9            }        ]    },    {        \"id\": 34,        \"currentStage\": 1,        \"startTime\": \"2017-12-18T12:22:14.8885464\",        \"endTime\": \"0001-01-01T00:00:00\",        \"numberOfTeamsRequired\": 0,        \"numberOfStages\": 4,        \"isEnoughTeams\": true,        \"teams\": [],        \"pairs\": [            {                \"id\": 21,                \"gamePairNumberInStage\": 0,                \"stageNumber\": 1,                \"team1\": {                    \"id\": 116,                    \"teamName\": \"bimbam5\",                    \"user\": null                },                \"team1Id\": 116,                \"team2\": {                    \"id\": 115,                    \"teamName\": \"bumbim5\",                    \"user\": null                },                \"team2Id\": 115,                \"game\": null,                \"gameId\": null            }        ]    },    {        \"id\": 35,        \"currentStage\": 1,        \"startTime\": \"2017-12-18T12:22:48.6474773\",        \"endTime\": \"0001-01-01T00:00:00\",        \"numberOfTeamsRequired\": 0,        \"numberOfStages\": 4,        \"isEnoughTeams\": true,        \"teams\": [],        \"pairs\": [            {                \"id\": 22,                \"gamePairNumberInStage\": 0,                \"stageNumber\": 1,                \"team1\": {                    \"id\": 116,                    \"teamName\": \"bimbam5\",                    \"user\": null                },                \"team1Id\": 116,                \"team2\": {                    \"id\": 115,                    \"teamName\": \"bumbim5\",                    \"user\": null                },                \"team2Id\": 115,                \"game\": {                    \"id\": 9,                    \"team1\": null,                    \"team2\": null,                    \"team1Score\": 7,                    \"team2Score\": 0,                    \"startTime\": \"2017-11-14T21:52:54.547861\",                    \"endTime\": \"2017-11-14T21:53:23.384727\",                    \"gameEvents\": null,                    \"user\": null                },                \"gameId\": 9            }        ]    },    {        \"id\": 36,        \"currentStage\": 1,        \"startTime\": \"2017-12-18T12:25:33.0188788\",        \"endTime\": \"0001-01-01T00:00:00\",        \"numberOfTeamsRequired\": 0,        \"numberOfStages\": 4,        \"isEnoughTeams\": true,        \"teams\": [],        \"pairs\": [            {                \"id\": 23,                \"gamePairNumberInStage\": 0,                \"stageNumber\": 1,                \"team1\": {                    \"id\": 116,                    \"teamName\": \"bimbam5\",                    \"user\": null                },                \"team1Id\": 116,                \"team2\": {                    \"id\": 115,                    \"teamName\": \"bumbim5\",                    \"user\": null                },                \"team2Id\": 115,                \"game\": null,                \"gameId\": null            }        ]    },    {        \"id\": 37,        \"currentStage\": 1,        \"startTime\": \"2017-12-18T15:37:02.1496719\",        \"endTime\": \"0001-01-01T00:00:00\",        \"numberOfTeamsRequired\": 8,        \"numberOfStages\": 4,        \"isEnoughTeams\": false,        \"teams\": [],        \"pairs\": [            {                \"id\": 37,                \"gamePairNumberInStage\": 0,                \"stageNumber\": 1,                \"team1\": {                    \"id\": 161,                    \"teamName\": \"hshsjsjzjzj\",                    \"user\": null                },                \"team1Id\": 161,                \"team2\": {                    \"id\": 160,                    \"teamName\": \"hzhzhzhz\",                    \"user\": null                },                \"team2Id\": 160,                \"game\": null,                \"gameId\": null            },            {                \"id\": 38,                \"gamePairNumberInStage\": 0,                \"stageNumber\": 1,                \"team1\": {                    \"id\": 161,                    \"teamName\": \"hshsjsjzjzj\",                    \"user\": null                },                \"team1Id\": 161,                \"team2\": {                    \"id\": 160,                    \"teamName\": \"hzhzhzhz\",                    \"user\": null                },                \"team2Id\": 160,                \"game\": null,                \"gameId\": null            },            {                \"id\": 39,                \"gamePairNumberInStage\": 0,                \"stageNumber\": 1,                \"team1\": {                    \"id\": 161,                    \"teamName\": \"hshsjsjzjzj\",                    \"user\": null                },                \"team1Id\": 161,                \"team2\": {                    \"id\": 160,                    \"teamName\": \"hzhzhzhz\",                    \"user\": null                },                \"team2Id\": 160,                \"game\": null,                \"gameId\": null            },            {                \"id\": 40,                \"gamePairNumberInStage\": 0,                \"stageNumber\": 1,                \"team1\": {                    \"id\": 161,                    \"teamName\": \"hshsjsjzjzj\",                    \"user\": null                },                \"team1Id\": 161,                \"team2\": {                    \"id\": 160,                    \"teamName\": \"hzhzhzhz\",                    \"user\": null                },                \"team2Id\": 160,                \"game\": {                    \"id\": 10,                    \"team1\": null,                    \"team2\": null,                    \"team1Score\": 7,                    \"team2Score\": 0,                    \"startTime\": \"2017-11-14T21:02:48.317942\",                    \"endTime\": \"2017-11-14T21:03:08.893432\",                    \"gameEvents\": null,                    \"user\": null                },                \"gameId\": 10            },            {                \"id\": 42,                \"gamePairNumberInStage\": 0,                \"stageNumber\": 1,                \"team1\": {                    \"id\": 162,                    \"teamName\": \"aaaaaaaaa\",                    \"user\": null                },                \"team1Id\": 162,                \"team2\": {                    \"id\": 163,                    \"teamName\": \"bbbbbbbbb\",                    \"user\": null                },                \"team2Id\": 163,                \"game\": null,                \"gameId\": null            }        ]    },    {        \"id\": 38,        \"currentStage\": 1,        \"startTime\": \"2017-12-18T16:34:08.9436733\",        \"endTime\": \"0001-01-01T00:00:00\",        \"numberOfTeamsRequired\": 8,        \"numberOfStages\": 4,        \"isEnoughTeams\": false,        \"teams\": [],        \"pairs\": []    },    {        \"id\": 39,        \"currentStage\": 1,        \"startTime\": \"2017-12-18T19:54:56.3196597\",        \"endTime\": \"0001-01-01T00:00:00\",        \"numberOfTeamsRequired\": 16,        \"numberOfStages\": 5,        \"isEnoughTeams\": true,        \"teams\": [            {                \"id\": 4,                \"team\": {                    \"id\": 168,                    \"teamName\": \"sodatwama\",                    \"user\": null                },                \"teamId\": 168            },            {                \"id\": 5,                \"team\": {                    \"id\": 169,                    \"teamName\": \"thisis\",                    \"user\": null                },                \"teamId\": 169            },            {                \"id\": 6,                \"team\": {                    \"id\": 170,                    \"teamName\": \"ateam\",                    \"user\": null                },                \"teamId\": 170            },            {                \"id\": 7,                \"team\": {                    \"id\": 171,                    \"teamName\": \"settea\",                    \"user\": null                },                \"teamId\": 171            },            {                \"id\": 8,                \"team\": {                    \"id\": 172,                    \"teamName\": \"aaaaaaaaaa\",                    \"user\": null                },                \"teamId\": 172            },            {                \"id\": 9,                \"team\": {                    \"id\": 173,                    \"teamName\": \"alakala\",                    \"user\": null                },                \"teamId\": 173            },            {                \"id\": 10,                \"team\": {                    \"id\": 174,                    \"teamName\": \"Lukaii\",                    \"user\": null                },                \"teamId\": 174            },            {                \"id\": 11,                \"team\": {                    \"id\": 175,                    \"teamName\": \"singlorious\",                    \"user\": null                },                \"teamId\": 175            },            {                \"id\": 13,                \"team\": {                    \"id\": 190,                    \"teamName\": \"profke\",                    \"user\": null                },                \"teamId\": 190            },            {                \"id\": 14,                \"team\": {                    \"id\": 191,                    \"teamName\": \"durniulaivas\",                    \"user\": null                },                \"teamId\": 191            },            {                \"id\": 15,                \"team\": {                    \"id\": 192,                    \"teamName\": \"flotile\",                    \"user\": null                },                \"teamId\": 192            },            {                \"id\": 16,                \"team\": {                    \"id\": 193,                    \"teamName\": \"newteam\",                    \"user\": null                },                \"teamId\": 193            },            {                \"id\": 17,                \"team\": {                    \"id\": 194,                    \"teamName\": \"theone\",                    \"user\": null                },                \"teamId\": 194            },            {                \"id\": 18,                \"team\": {                    \"id\": 196,                    \"teamName\": \"wellmet\",                    \"user\": null                },                \"teamId\": 196            },            {                \"id\": 19,                \"team\": {                    \"id\": 198,                    \"teamName\": \"RUGay\",                    \"user\": null                },                \"teamId\": 198            },            {                \"id\": 24,                \"team\": {                    \"id\": 200,                    \"teamName\": \"stalin\",                    \"user\": null                },                \"teamId\": 200            }        ],        \"pairs\": [            {                \"id\": 56,                \"gamePairNumberInStage\": 0,                \"stageNumber\": 1,                \"team1\": {                    \"id\": 173,                    \"teamName\": \"alakala\",                    \"user\": null                },                \"team1Id\": 173,                \"team2\": {                    \"id\": 198,                    \"teamName\": \"RUGay\",                    \"user\": null                },                \"team2Id\": 198,                \"game\": null,                \"gameId\": null            },            {                \"id\": 57,                \"gamePairNumberInStage\": 0,                \"stageNumber\": 1,                \"team1\": {                    \"id\": 194,                    \"teamName\": \"theone\",                    \"user\": null                },                \"team1Id\": 194,                \"team2\": {                    \"id\": 168,                    \"teamName\": \"sodatwama\",                    \"user\": null                },                \"team2Id\": 168,                \"game\": null,                \"gameId\": null            },            {                \"id\": 58,                \"gamePairNumberInStage\": 0,                \"stageNumber\": 1,                \"team1\": {                    \"id\": 170,                    \"teamName\": \"ateam\",                    \"user\": null                },                \"team1Id\": 170,                \"team2\": {                    \"id\": 191,                    \"teamName\": \"durniulaivas\",                    \"user\": null                },                \"team2Id\": 191,                \"game\": null,                \"gameId\": null            },            {                \"id\": 59,                \"gamePairNumberInStage\": 0,                \"stageNumber\": 1,                \"team1\": {                    \"id\": 172,                    \"teamName\": \"aaaaaaaaaa\",                    \"user\": null                },                \"team1Id\": 172,                \"team2\": {                    \"id\": 193,                    \"teamName\": \"newteam\",                    \"user\": null                },                \"team2Id\": 193,                \"game\": null,                \"gameId\": null            },            {                \"id\": 60,                \"gamePairNumberInStage\": 0,                \"stageNumber\": 1,                \"team1\": {                    \"id\": 190,                    \"teamName\": \"profke\",                    \"user\": null                },                \"team1Id\": 190,                \"team2\": {                    \"id\": 196,                    \"teamName\": \"wellmet\",                    \"user\": null                },                \"team2Id\": 196,                \"game\": null,                \"gameId\": null            },            {                \"id\": 61,                \"gamePairNumberInStage\": 0,                \"stageNumber\": 1,                \"team1\": {                    \"id\": 175,                    \"teamName\": \"singlorious\",                    \"user\": null                },                \"team1Id\": 175,                \"team2\": {                    \"id\": 200,                    \"teamName\": \"stalin\",                    \"user\": null                },                \"team2Id\": 200,                \"game\": null,                \"gameId\": null            },            {                \"id\": 62,                \"gamePairNumberInStage\": 0,                \"stageNumber\": 1,                \"team1\": {                    \"id\": 171,                    \"teamName\": \"settea\",                    \"user\": null                },                \"team1Id\": 171,                \"team2\": {                    \"id\": 169,                    \"teamName\": \"thisis\",                    \"user\": null                },                \"team2Id\": 169,                \"game\": null,                \"gameId\": null            },            {                \"id\": 63,                \"gamePairNumberInStage\": 0,                \"stageNumber\": 1,                \"team1\": {                    \"id\": 174,                    \"teamName\": \"Lukaii\",                    \"user\": null                },                \"team1Id\": 174,                \"team2\": {                    \"id\": 192,                    \"teamName\": \"flotile\",                    \"user\": null                },                \"team2Id\": 192,                \"game\": null,                \"gameId\": null            }        ]    }]";
            Tournament[] tournaments = FoosballJsonConvert.DeserializeObject<Tournament[]>(response);
            if (tournaments == null)
            {
                tournaments = new Tournament[]{};
            }
            return tournaments;
        }

        /// <summary>
        /// Fetches the tournament by a given id
        /// </summary>
        /// <param name="id"></param>
        /// <returns></returns>
        public async Task<Tournament> GetById(int id)
        {
            var response = await client.GetAsync(endpointUrl + "/" + id);
            Tournament tournament = FoosballJsonConvert.DeserializeObject<Tournament>(response);
            return tournament;
        }

        /// <summary>
        /// Creates a tournament
        /// </summary>
        /// <param name="tournament"></param>
        /// <returns></returns>
        public async Task<Tournament> Create(Tournament tournament)
        {
            var tournamentJsonString = JsonConvert.SerializeObject(tournament);
            var response = await client.PostAsync(endpointUrl, tournamentJsonString);
            Tournament createdTournament = FoosballJsonConvert.DeserializeObject<Tournament>(response);
            return createdTournament;
        }

        /// <summary>
        /// Updates a tournament
        /// </summary>
        /// <param name="id"></param>
        /// <param name="tournament"></param>
        /// <returns></returns>
        public async Task<Tournament> Update(int id, Tournament tournament)
        {
            var tournamentJsonString = JsonConvert.SerializeObject(tournament);
            var response = await client.PutAsync(endpointUrl + "/" + id , tournamentJsonString);
            Tournament updatedTournament = FoosballJsonConvert.DeserializeObject<Tournament>(response);
            return updatedTournament;
        }

        /// <summary>
        /// Deletes a tournament
        /// </summary>
        /// <param name="id"></param>
        /// <returns></returns>
        public async Task<Tournament> Delete(int id)
        {
            var response = await client.DeleteAsync(endpointUrl + "/" + id);
            Tournament updatedTournament = FoosballJsonConvert.DeserializeObject<Tournament>(response);
            return updatedTournament;
        }
    }
}